# JWT?
- JWT(JSON Web Token, JWT)
- JSON 객체로 정보를 안전하게 전송하기 위한 방법
- JWT는 상태 비저장, 불투명 토큰과 달리 데이터베이스(지속 계층)에 저장할 필요가 없다.
- JWT의 서명은 절대 해독되지 않으므로 보안에 좋음.
- JWT는 일정 기간이 지나면 무효로 설정. 토큰이 탈취되었을 때의 피해를 최소화.

# JWT 구성
- 헤더
  - 사용된 토큰 유형 및 서명 알고리즘.
  - 토큰 유형은 "JWT"일 수 있고, 서명 알고리즘은 HMAC 또는 SHA256 등등..
- 페이로드
  - 클레임이 포함된 토큰의 두 번째 부분.
  - 애플리케이션별 데이터(예: 사용자 ID, 사용자 이름), 토큰 만료 시간(exp), 발급자(iss), 제목(sub) 등이 포함.
- 서명
  - 인코딩된 헤더, 페이로드, 기타 사용자가 제공한 암호등으로 서명을 작성.

# 토큰타입
- JWT는 특정 기간 후에 만료(무효)로 설정될 수 있다. 
- 보통 만료 기간이 다른 두 개의 토큰을 생성한다.
- 액세스 토큰(Access Token)
  - 인증이 필요한 요청에 사용. 
  - 일반적으로 요청 헤더에 추가 됨.
  - 수명은 15분 정도로 짧을 것을 권장. 
  - 액세스 토큰에 짧은 시간 간격을 부여하면 토큰이 탈취되더라도 심각한 공격을 방지. 
- 리프레쉬 토큰(Refresh Token)
  - 일반적으로 7일 정도로 설정.
  - 액세스 토큰보다 유효기간이 길다.
  - 새로운 액세스를 생성, 액세스 토큰을 다시 발급받는데 사용. 
  - 액세스 토큰 만료시 리프래시 토큰을 보내서 새로운 액세스 및 리프래시 토큰을 생성.

# 저장위치
- HttpOnly 쿠키에 저장하는 것을 적극 권장. 
- 백엔드에서 생성된 쿠키를 프런트엔드로 보내는 동안, 클라이언트측 스크립트를 통해 쿠키를 표시하지 않도록 브라우저에 지시하는 HttpOnly 플래그가 쿠키를 따라 전송.(스크립팅(XSS) 공격을 방지)
- JWT는 브라우저 로컬 스토리지 또는 세션 스토리지에도 저장할 수 있다. (but XSS와 같은 여러 공격에 노출 됨)
